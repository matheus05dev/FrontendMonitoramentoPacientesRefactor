<div class="container">
  <h1>Lista de Notificações</h1>

  <div class="search-bar">
    <input type="text" [(ngModel)]="searchTerm" (input)="onSearch()" placeholder="Buscar...">
    <button class="primary" (click)="carregarNotificacoes()">
      <mat-icon>refresh</mat-icon>
      Atualizar
    </button>
  </div>

  <div *ngIf="loading" class="loading">Carregando...</div>

  <div *ngIf="error" class="no-data">{{error}}</div>

  <table *ngIf="!loading && !error && filteredNotificacoes.length > 0">
    <thead>
      <tr>
        <th>Quarto</th>
        <th>Tipo de Dado</th>
        <th>Valor</th>
        <th>Status</th>
        <th>Data de Criação</th>
        <th>Data de Fechamento</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let notificacao of filteredNotificacoes">
        <td>{{ notificacao.numeroQuarto || 'N/A' }}</td>
        <td>{{ notificacao.leituraSensor?.tipoDado || 'N/A' }}</td>
        <td>{{ notificacao.leituraSensor?.valor }} {{ notificacao.leituraSensor?.unidadeMedida }}</td>
        <td>{{ notificacao.status || 'N/A' }}</td>
        <td>{{ notificacao.dataCriacao | date:'short' }}</td>
        <td>{{ notificacao.dataFechamento ? (notificacao.dataFechamento | date:'short') : 'N/A' }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && !error && filteredNotificacoes.length === 0" class="no-data">
    Nenhuma notificação encontrada.
  </div>
</div>
