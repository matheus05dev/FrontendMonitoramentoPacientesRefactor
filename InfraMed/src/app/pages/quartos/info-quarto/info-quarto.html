<div class="container">
  <mat-card class="card">
    <mat-card-header>
      <mat-card-title>Informações do Quarto</mat-card-title>
    </mat-card-header>

    <mat-card-content *ngIf="quarto" class="card-content">
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">Número:</span>
          <span class="info-value">{{ quarto.numero }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Localização:</span>
          <span class="info-value">{{ quarto.localizacao }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Tipo:</span>
          <span class="info-value">{{ quarto.tipo }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Capacidade:</span>
          <span class="info-value">{{ quarto.capacidade }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Pacientes Alocados:</span>
          <span class="info-value">{{ quarto.pacientesIds.length }}</span>
        </div>
      </div>

      <div class="section-divider"></div>

      <div class="section">
        <h3 class="section-title">Pacientes Alocados</h3>
        <ul class="info-list" *ngIf="allocatedPatients.length > 0">
          <li *ngFor="let p of allocatedPatients" class="patient-item">
            <span>{{ p.nome }}</span>
            <button mat-raised-button color="warn" (click)="removePaciente(p.id)" class="remove-btn">Remover</button>
          </li>
        </ul>
        <p *ngIf="allocatedPatients.length === 0" class="no-data">Nenhum paciente alocado.</p>
      </div>

      <div *ngIf="quarto && quarto.pacientesIds.length < quarto.capacidade" class="section">
        <h3 class="section-title">Alocar Paciente</h3>
        <div class="allocate-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Selecione o Paciente</mat-label>
            <mat-select [(ngModel)]="selectedAllocate">
              <mat-option [value]="null">Selecione um paciente</mat-option>
              <mat-option *ngFor="let p of availablePatients" [value]="p">{{ p.nome }}</mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-raised-button color="primary" (click)="allocatePaciente()" [disabled]="!selectedAllocate" class="allocate-btn">Alocar</button>
        </div>
      </div>

      <div class="actions">
        <button mat-raised-button color="primary" (click)="edit()">Editar</button>
        <button mat-raised-button (click)="back()">Voltar</button>
      </div>
    </mat-card-content>

    <mat-card-content *ngIf="!quarto" class="card-content">
      <p class="not-found">Carregando...</p>
    </mat-card-content>
  </mat-card>
</div>