<div class="container">
  <h1>Lista de Leituras</h1>

  <div class="search-bar">
    <input type="number" placeholder="Buscar por ID do atendimento..." [(ngModel)]="atendimentoId">
    <button class="primary" (click)="buscarLeituras()">
      <mat-icon>search</mat-icon>
      Buscar
    </button>
  </div>

  <div *ngIf="loading" class="loading">Carregando...</div>

  <div *ngIf="error" class="no-data">{{error}}</div>

  <table *ngIf="!loading && !error && leituras.length > 0">
    <thead>
      <tr>
        <th>Tipo de Dado</th>
        <th>Valor</th>
        <th>Unidade</th>
        <th>Data/Hora</th>
        <th>Condição de Saúde</th>
        <th>Gravidade</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let leitura of leituras">
        <td>{{ leitura.tipoDado }}</td>
        <td>{{ leitura.valor }}</td>
        <td>{{ leitura.unidadeMedida }}</td>
        <td>{{ leitura.dataHora | date:'short' }}</td>
        <td>{{ leitura.condicaoSaude || 'N/A' }}</td>
        <td>{{ leitura.gravidade || 'N/A' }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && !error && leituras.length === 0 && atendimentoId" class="no-data">
    Nenhuma leitura encontrada para este atendimento.
  </div>

  <div *ngIf="!loading && !error && !atendimentoId" class="no-data">
    Digite o ID do atendimento para buscar leituras.
  </div>
</div>
